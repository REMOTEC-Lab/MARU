/*
dated write : 2012.04.19
writer :이영수
type : css  또는 js 파일
usage : (삽입,수정,삭제)

	$(document.getElementsByTagName("head")[0]).jscssfile({
		kind : 'load',
		//loadfile : ['/hosts/css/test.css', '/hosts/css/substyle2.css'],
		loadfile : '/hosts/devgx.com/css/test.css',
		callback
	}).jscssfile("destroy");
*/
(function(d,l,g,e){function h(a,b){this.options=d.extend({},m,b);this.options.kind==e||this.options.loadfile==e||null==this.options.kind||null==this.options.loadfile?delete this.options:this.init()}var k=null,m={kind:"",loadfile:null,replacefile:null,callback:e};h.prototype.destroy=function(){for(var a in this.options)if("string"==d.type(this.options[a]))delete this.options[a];else if("array"==d.type(this.options[a]))for(var b in this.options[a])delete this.options[a][b]};h.prototype.init=function(){"string"==
d.type(this.options.loadfile)&&(this.options.loadfile=[this.options.loadfile]);"string"==d.type(this.options.replacefile)&&(this.options.replacefile=[this.options.replacefile]);"load"==this.options.kind?this.load():"replace"==this.options.kind?this.replace():"remove"==this.options.kind&&this.remove()};h.prototype.load=function(){var a="object"==typeof this.options?this.options:null,b=0,e=this.options.loadfile.length;if(!this.exist())for(var c in this.options.loadfile){if(this.options.loadfile[c].match(/(\.js|\.json)$/i)){var f=
g.createElement("script");f.setAttribute("type","text/javascript");f.setAttribute("src",this.options.loadfile[c])}else this.options.loadfile[c].match(/\.css$/i)&&(f=g.createElement("link"),f.setAttribute("rel","stylesheet"),f.setAttribute("type","text/css"),f.setAttribute("href",this.options.loadfile[c]));f.onerror=function(){console.log("Error loading "+this.src);b++;e==b&&d.isFunction(a.callback)&&a.callback()};var h=this.options.loadfile[c];f.readyState?f.onreadystatechange=function(){if("loaded"==
f.readyState||"complete"==f.readyState)f.onreadystatechange=null,d.isFunction(a.callback)&&a.callback(h)}:f.onload=function(){b++;e==b&&d.isFunction(a.callback)&&a.callback()};g.getElementsByTagName("head")[0].appendChild(f)}};h.prototype.exist=function(){for(var a in this.options.loadfile){var b=this.options.loadfile[a].match(/\.js$/i)?"script":this.options.loadfile[a].match(/\.css$/i)?"link":"none",d=this.options.loadfile[a].match(/\.js$/i)?"src":this.options.loadfile[a].match(/\.css$/i)?"href":
"none";b=g.getElementsByTagName(b);for(var c=b.length;0<=c;c--)if(b[c]&&null!=b[c].getAttribute(d)&&-1!=b[c].getAttribute(d).indexOf(this.options.loadfile[a]))return console.log("\uc774\ubbf8\uc874\uc7ac\ud568 "+this.options.loadfile[a]),!0}return!1};h.prototype.replace=function(){for(var a in this.options.loadfile)if(this.options.replacefile[a]==e){var b=this.options.loadfile[a].match(/\.js$/i)?"script":this.options.loadfile[a].match(/\.css$/i)?"link":"none",d=this.options.loadfile[a].match(/\.js$/i)?
"src":this.options.loadfile[a].match(/\.css$/i)?"href":"none";b=g.getElementsByTagName(b);for(var c=b.length;0<=c;c--)b[c]&&null!=b[c].getAttribute(d)&&-1!=b[c].getAttribute(d).indexOf(this.options.loadfile[a])&&b[c].parentNode.replaceChild(this.options.replacefile[a],b[c])}"undefined"!==this.options.callback&&eval(this.options.callback)};h.prototype.remove=function(){for(var a in this.options.loadfile){var b=this.options.loadfile[a].match(/\.js$/i)?"script":this.options.loadfile[a].match(/\.css$/i)?
"link":"none",e=this.options.loadfile[a].match(/\.js$/i)?"src":this.options.loadfile[a].match(/\.js$/i)?"href":"none";b=g.getElementsByTagName(b);for(var c=b.length;0<=c;c--)b[c]&&null!=b[c].getAttribute(e)&&-1!=b[c].getAttribute(e).indexOf(this.options.loadfile[a])&&b[c].parentNode.removeChild(b[c])}d.isFunction(this.options.callback)&&this.options.callback()};d.fn.jscssfile=function(a){var b=d.type(a);if("object"===b)return this.length&&!d.data(this,"jscssfile")&&(k=new h(this,a),this.each(function(){d.data(this,
"jscssfile",k)})),this;if("string"===b&&"destroy"===a)return k.destroy(),this.each(function(){d.removeData(this,"jscssfile")}),this;"number"===b&&0===a%1&&k.validNewPage(a)&&k.paginate(a);return this}})(jQuery,window,document);
function loadScript(d,l){var g=document.getElementsByTagName("head")[0],e=document.createElement("script");done=!1;e.setAttribute("src",d);e.setAttribute("type","text/javascript");e.setAttribute("charset","utf-8");e.onload=e.onreadstatechange=function(){done||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(done=!0,e.onload=e.onreadystatechange=null,l&&l(this))};g.insertBefore(e,g.firstChild)};
